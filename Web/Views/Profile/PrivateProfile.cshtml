@using Common.Enums
@model Web.Models.Profile.PrivateProfileModel

@{
    ViewBag.Title = "Your Profile";
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
}
<link href="~/Content/dropzone.css" rel="stylesheet" />

<h2>title</h2>

<div id="dropZone" class="imageDrop">
    @foreach (var image in Model.ProfileImageUrls)
    {
        <div class="dz-preview dz-processing dz-image-preview">
            <div class="dz-details">
                <img data-dz-thumbnail="" alt="@image.Filename" src="@image.Url" />
            </div>
            <a class="dz-remove" href="javascript:undefined;">Remove</a>
        </div>
    }
</div>
<div id="profileImage">
    @if (Model.ProfileImage != null)
    {
        <img src ="@Model.ProfileImage" alt="Profile Image"/>
    }
</div>

@using (Html.BeginForm("EditProfile", "Profile"))
{

    @Html.LabelFor(x => x.FirstName)
    @Html.TextBoxFor(x => x.FirstName)
    @Html.ValidationMessageFor(x => x.FirstName)

    @Html.LabelFor(x => x.LastName)
    @Html.TextBoxFor(x => x.LastName)
    @Html.ValidationMessageFor(x => x.LastName)

    @Html.LabelFor(x => x.Description)
    @Html.TextAreaFor(x => x.Description)
    @Html.ValidationMessageFor(x => x.Description)
    
    @Html.LabelFor(x => x.Orientation)
    @Html.DropDownListFor(x => x.Orientation, Enum.GetNames(typeof(Orientation)).Select(c => new SelectListItem { Text = c, Value = c }).ToArray())
    @Html.ValidationMessageFor(x => x.Orientation)

    @Html.LabelFor(x => x.Gender)
    @Html.DropDownListFor(x => x.Gender, Enum.GetNames(typeof(Gender)).Select(c => new SelectListItem { Text = c, Value = c }).ToArray())
    @Html.ValidationMessageFor(x => x.Gender)

    @Html.LabelFor(x => x.Friendship)
    @Html.CheckBoxFor(x => x.Friendship)
    @Html.ValidationMessageFor(x => x.Friendship)

    @Html.LabelFor(x => x.Romance)
    @Html.CheckBoxFor(x => x.Romance)
    @Html.ValidationMessageFor(x => x.Romance)

    @Html.LabelFor(x => x.Address)
    @Html.TextBoxFor(x => x.Address, new { @id = "address" })
    @Html.ValidationMessageFor(x => x.Address)

    @Html.LabelFor(x => x.Suburb)
    @Html.TextBoxFor(x => x.Suburb, new { @id = "suburb" })
    @Html.ValidationMessageFor(x => x.Suburb)

    @Html.LabelFor(x => x.City)
    @Html.TextBoxFor(x => x.City, new { @id = "city" })
    @Html.ValidationMessageFor(x => x.City)

    @Html.LabelFor(x => x.Country)
    @Html.TextBoxFor(x => x.Country, new { @id = "country" })
    @Html.ValidationMessageFor(x => x.Country)

    @Html.LabelFor(x => x.Postcode)
    @Html.TextBoxFor(x => x.Postcode, new { @id = "postcode" })
    @Html.ValidationMessageFor(x => x.Postcode)

    <div id="googleMap" style="width:600px;height:450px;"></div>
    
    <input type ="submit" value="Submit"/>
}

@section PageScripts
{
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCWDvzKRlIivJbwLUH-UJ1NgxySV99pH1s&sensor=true"></script>
    <script src="~/Scripts/dropzone.js"></script>
    <script src="~/Scripts/Custom/SelectLocation.js"></script>
    <script src="~/Scripts/Custom/ImageUpload.js"></script>
    <script type="text/javascript">
        SelectLocation.init();
        imageUpload("@Url.Action("ProfileImage", "Upload")",
            "#dropZone",
            "@Url.Action("RemoveProfileImage", "Upload")",
            function(element) {
                var fileName = $(element.target).attr('alt');
                $.post("@Url.Action("SelectImage", "Profile")", {fileName : fileName})
                    .done(function(response) {
                        $('#profileImage').html('<img src="' + response + '" alt=' + fileName + '/>')
                    });
            });
    </script>
}
