@model Web.Models.Dinner.CreateDinnerModel
@{
    ViewBag.Title = "Create a dinner";
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
}
<style>
    .table {
    float: left;
    text-align: center;
    margin-right: 5px;
}

.table span {
    font-size: .75em;
}

.seats {
    border: solid 3px #666;
    width: 75px;
    height: 100px;
    background-color: #666;
    margin: 5px;
    padding: 2px;
    border-radius: 5px;
    box-shadow: 2px 2px 2px #999;
}

.ko_container {
    border: solid 3px green;
}

.student {
    background-color: #444;
    color: #fff;
    border-radius: 3px;
    margin: 2px;
    padding: 1px;
    text-align: center;
    width: 70px;
    cursor: move;
}

.new {
    border: solid 1px #444;
    background-color: #ccc;
    height: 25px;
    width: 500px;
    padding: 2px;
    border-radius: 5px;
}

.new div {
    float: left;
}

.note {
    font-style: italic;
    font-size: .75em;
    color: #888;
    margin-bottom: 10px;
}

.count {
    color: #666;
}

.ready {
    color: green;
}

#extra {
    clear: both;
    padding-top: 20px;
}

#master {
    margin-top: 40px;
}


#master td, th {
    font-size: .75em;
    text-align: center;
    padding: 1px;
    border: solid 1px black;
}

#master th {
    color: #666;
}

#message, #error {
    font-size: .75em;
    margin-top: 10px;
    background-color: orange;
    color: #444;
    padding: 2px;
    width: 500px;
    text-align: center;
    border-radius: 5px;
    box-shadow: 2px 2px 2px #999;
    position: absolute;
}

#error {
    background-color: #ff3333;
    color: #ddd;
}
</style>
<h2>Create A Dinner</h2>
@using (Html.BeginForm("Create", "Dinner"))
{
    <div id="main" data-bind="foreach: jobs">
        <div class="table">
            <span data-bind="text: guests.id"></span>
            <div class="seats" data-bind="sortable: { data: guests, allowDrop: $root.isJobFilled }">
                <div class="student" data-bind="text: name"></div>
            </div>
        </div>
    </div>
    <input type ="submit" value="Submit"/>
}

<div id="extra">
    <div>Available Guests</div>
    <div class="new" data-bind="sortable: guests">
        <div class="student" data-bind="text: name"></div>
    </div>
</div>
@*
<div>Seating Assignments</div>
<div class="note">Rules: no more than 4 students per table. Must have at least one student of each gender at a full table.</div>
<div id="main" data-bind="foreach: tables">
    <div class="table">
        <span data-bind="text: students.id"></span>
        <div class="seats" data-bind="sortable: { data: students, allowDrop: $root.isTableFull }">
            <div class="student" data-bind="text: name"></div>
        </div>
        <div class="count" data-bind="text: students().length + '/' + $root.maximumStudents, css: { ready: students().length < $root.maximumStudents }"></div>
    </div>
</div>



<div id="message" data-bind="flash: lastAction"></div>
<div id="error" data-bind="flash: lastError"></div>

<div id="master">
    <div>Master List</div>
    <table>
        <tr>
            <th></th>
            <th>Seat One</th>
            <th>Seat Two</th>
            <th>Seat Three</th>
            <th>Seat Four</th>
        </tr>
        <tbody data-bind="foreach: tables">
            <tr>
                <th data-bind="text: students.id"></th>
                <!-- ko foreach: students -->
                <td data-bind="text: name"></td>
                <!-- /ko -->
            </tr>
        </tbody>
        <tr>
            <th>Available</th>
            <!-- ko foreach: availableStudents -->
            <td data-bind="text: name"></td>
            <!-- /ko -->
        </tr>
    </table>
</div>*@

@section PageScripts
{
    <script src="~/Scripts/jquery-ui-1.10.3.min.js"></script>
    <script src="https://rawgithub.com/rniemeyer/knockout-sortable/master/build/knockout-sortable.js"></script>
    <script src="~/Scripts/Custom/DinnerSetup.js"></script>
}
